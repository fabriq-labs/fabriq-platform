---
sidebar_position: 2
sidebar_label: Authentication
---

# Authentication

In Fabriq, we use authentication through either Firebase or Cognito.

## Firebase Authentication

1.To enable Firebase authentication, add the necessary Firebase credentials to the environment (env) file as listed below:

```shell
REACT_APP_FIREBASE_API_KEY=xxx
REACT_APP_FIREBASE_AUTH_DOMAIN=xxx
REACT_APP_FIREBASE_DATABASE_URL=xxx
REACT_APP_FIREBASE_PROJECT_ID=xxx
REACT_APP_FIREBASE_STORAGE_BUCKET=xxx
REACT_APP_FIREBASE_MESSAGING_SENDERID=xxx
```

Please ensure that you replace `xxx` with the actual values for each credential.

2.Inside the initialize function in the 'client.js' file, declare the environment variables. Make sure to import Firebase above this declaration. Refer to the provided example code below:

```shell
import firebase from 'firebase'; // Import Firebase before using it

initialize() {
    const firebaseConfig = {
      apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
      authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
      projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
      storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,
      messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDERID
    };

    this._app = firebase.initializeApp(firebaseConfig);
    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);
}
```

Ensure that you import the Firebase module before utilizing it within the function. Then, employ the imported module to initialize Firebase and configure it as needed.

3.Please review and confirm the 'login_page.js' file. Within the 'onLogin' function, Firebase API is utilized for authentication. The function sends the user's email and password for authentication and subsequently returns the result. The authentication process involves the use of 'UserApi.login(data.email, data.password)'.

## Cognito Authentication
1.To enable Cognito authentication, add the necessary Cognito credentials to the environment (env) file as listed below:

```shell
REACT_APP_COGNITO_CLIENT_ID=xxx
REACT_APP_COGNITO_AWS_USERPOOL_URI=xxx
REACT_APP_COGNITO_AWS_USERPOOL=xxx
REACT_APP_COGNITO_AWS_REGION=xxx
REACT_APP_CLAIM_NAME=xxx
```
Please ensure that you replace `xxx` with the actual values for each credential.

Ensure you import the Amplify module before using it in the function.
Then, utilize the imported module to initialize Amplify and configure it with the necessary settings.
```import { Amplify } from "aws-amplify"```

2.Inside the initialize function in the client.js file, declare the environment variables. Please refer to the example code below:

```shell
  const cognitoConfig = {
    clientId: process.env.REACT_APP_COGNITO_CLIENT_ID,
    userPoolUri: process.env.REACT_APP_COGNITO_AWS_USERPOOL_URI,
    userPool: process.env.REACT_APP_COGNITO_AWS_USERPOOL,
    region: process.env.REACT_APP_COGNITO_AWS_REGION,
    callbackUri: process.env.REACT_APP_BACKEND_BASE_URL,
    signoutUri: process.env.REACT_APP_BACKEND_BASE_URL,
    tokenScopes: ["openid", "email", "profile", "aws.cognito.signin.user.admin"]
  };

  // Configure Amplify with Cognito settings
  Amplify.configure({
    Auth: {
      userPoolId: cognitoConfig.userPool,
      userPoolWebClientId: cognitoConfig.clientId,
      region: cognitoConfig.region,
      oauth: {
        domain: cognitoConfig.userPoolUri,
        scope: cognitoConfig.tokenScopes,
        redirectSignIn: cognitoConfig.callbackUri,
        redirectSignOut: cognitoConfig.signoutUri,
        responseType: "code"
      }
    }
  });
```

3.Please review and confirm the login_page.js file. Inside the onLogin function, the Amplify API is used for authentication. The function sends the user's email and password for authentication, and it subsequently returns the result. The authentication process involves using `AmplifyApi.signin(data.email, data.password)`.