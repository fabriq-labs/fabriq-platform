<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-snowplow/setup-snowplow-gcp">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Setting Up Snowplow on GCP | Fabriq</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://community.getfabriq.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://community.getfabriq.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://community.getfabriq.com/docs/snowplow/setup-snowplow-gcp"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setting Up Snowplow on GCP | Fabriq"><meta data-rh="true" name="description" content="Setting up Snowplow on Google Cloud Platform (GCP) involves configuring and installing the Snowplow event data collection platform on GCP infrastructure. Snowplow is an open-source tool used for collecting, processing, and analyzing event data from various sources."><meta data-rh="true" property="og:description" content="Setting up Snowplow on Google Cloud Platform (GCP) involves configuring and installing the Snowplow event data collection platform on GCP infrastructure. Snowplow is an open-source tool used for collecting, processing, and analyzing event data from various sources."><link data-rh="true" rel="icon" href="/img/fabriq_helmet_logo.png"><link data-rh="true" rel="canonical" href="https://community.getfabriq.com/docs/snowplow/setup-snowplow-gcp"><link data-rh="true" rel="alternate" href="https://community.getfabriq.com/docs/snowplow/setup-snowplow-gcp" hreflang="en"><link data-rh="true" rel="alternate" href="https://community.getfabriq.com/docs/snowplow/setup-snowplow-gcp" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5BLNK4K9",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/assets/css/styles.8a537551.css">
<link rel="preload" href="/assets/js/runtime~main.e3b0f24b.js" as="script">
<link rel="preload" href="/assets/js/main.53e17bc8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BLNK4K9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/fabriq_logo.png" alt="Fabriq logo" class="themedImage_ToTc themedImage--light_HNdA" style="width:50px;height:50px"><img src="/img/fabriq_logo.png" alt="Fabriq logo" class="themedImage_ToTc themedImage--dark_i4oU" style="width:50px;height:50px"></div><b class="navbar__title text--truncate">fabriq</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/#how-it-works">How It Works</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/#features">Features</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Read docs</a><div class="button button--primary button--lg get-button">Meet us at ONA</div><a href="https://github.com/fabriq-labs/fabriq-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/quickstart">Quickstart</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quickstart&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/connectors">Connectors</a><button aria-label="Toggle the collapsible sidebar category &#x27;Connectors&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/analytics">Analytics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Analytics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/destinations">Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/snowplow">Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snowplow/gtm configuration">GTM Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snowplow/setup-snowplow-aws">Setting Up Snowplow on AWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/snowplow/setup-snowplow-gcp">Setting Up Snowplow on GCP</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/toolbar">Toolbar</a><button aria-label="Toggle the collapsible sidebar category &#x27;Toolbar&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/snowplow"><span itemprop="name">Snowplow</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Setting Up Snowplow on GCP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Setting Up Snowplow on GCP</h1><p>Setting up Snowplow on Google Cloud Platform (GCP) involves configuring and installing the Snowplow event data collection platform on GCP infrastructure. Snowplow is an open-source tool used for collecting, processing, and analyzing event data from various sources.</p><p>To set up Snowplow on GCP, you need to create a GCP account and project, enable necessary GCP services like Google Cloud Storage, BigQuery and Pub/Sub, provision the required infrastructure, install Snowplow components (Collector, Enrichment, Loader), configure data storage, and set up monitoring and logging.</p><p>Once Snowplow is running, it collects event data, which can be stored in GCP&#x27;s storage systems like Google Cloud Storage or BigQuery. You can then utilize GCP&#x27;s data analysis and visualization tools to analyze and visualize the collected event data.</p><p>Setting up Snowplow on GCP involves a series of steps to ensure a successful installation and configuration process, allowing you to effectively collect and utilize event data for analysis and insights.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objective">Objective<a href="#objective" class="hash-link" aria-label="Direct link to Objective" title="Direct link to Objective">​</a></h2><ol><li><p>Create a Google Cloud Platform (GCP) Account.</p><ul><li>Sign up for a GCP account to access GCP services and resources.</li></ul></li><li><p>Set up a GCP Project.</p><ul><li>Create a new GCP project to organize and manage resources for Snowplow.</li></ul></li><li><p>Enable Google Cloud Pub/Sub.</p><ul><li>Enable the Google Cloud Pub/Sub service in GCP to facilitate event data ingestion and streaming.</li></ul></li><li><p>Provision infrastructure for Snowplow.</p><ul><li>Set up virtual machines or utilize managed services like Google Kubernetes Engine (GKE) to provide the necessary computing resources for Snowplow components.</li></ul></li><li><p>Install and configure Snowplow trackers.</p><ul><li>Implement Snowplow trackers in your applications or websites to collect event data and send it to the Snowplow infrastructure.</li></ul></li><li><p>Deploy a Snowplow Collector using Pub/Sub.</p><ul><li>Set up the Snowplow Collector component to subscribe to the Pub/Sub topic and receive and process the incoming events.</li></ul></li><li><p>Configure Snowplow enrichment for enhanced insights.</p><ul><li>Set up Snowplow&#x27;s Enrichment component to enrich the incoming events with additional contextual information, such as user demographics or geolocation data.</li></ul></li><li><p>Choose a data storage solution.</p><ul><li>Select and configure a suitable data storage solution in GCP, such as Google Cloud Storage or Google BigQuery, to store and query the Snowplow event data.</li></ul></li><li><p>Enable data visualization and analysis.</p><ul><li>Utilize data visualization tools or analytics platforms available in GCP, such as Google Data Studio or BigQuery, to analyze and visualize the Snowplow event data.</li></ul></li><li><p>Set up monitoring and maintenance.</p><ul><li>Implement monitoring and logging mechanisms to track the health, data accuracy, and performance of the Snowplow setup on GCP. Ensure proactive monitoring and maintenance for optimal system performance.</li></ul></li></ol><p>These objectives provide a roadmap for setting up Snowplow with Google Cloud Pub/Sub on GCP, covering various aspects from account creation to monitoring and maintenance. Adjust the objectives according to your specific requirements and use case.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-and-resources-required">Environment and Resources Required<a href="#environment-and-resources-required" class="hash-link" aria-label="Direct link to Environment and Resources Required" title="Direct link to Environment and Resources Required">​</a></h2><p>Below Github repository contains configurations, schemas, sample web app and everything needed for setting up a Snowplow real-time analytics pipeline in GCP.</p><ol><li><p><strong>Github URL</strong>: <a href="https://github.com/fabriq-labs/fabriq-platform/tree/master/snowplow/gcp" target="_blank" rel="noopener noreferrer">Click here</a> - fabriq-platform-snowplow-gcp.</p></li><li><p><strong>Cloud Provider</strong>: The Snowplow Enricher is deployed on GCP, one of the leading cloud service providers, known for its robust infrastructure and extensive suite of cloud services.</p></li><li><p><strong>VM Instances</strong>:</p><ul><li><p><strong>Snowplow Collector</strong>: Snowplow deploys virtual machine instances to host the Collector component. The Collector efficiently gathers raw event data from various sources, enabling seamless and reliable data collection.</p></li><li><p><strong>Snowplow Enricher and Loader</strong>:  The Enricher and Loader components run on VM instances. They process the raw event data collected by the Collector, performing data enrichment and transformation. The Enricher enriches the raw data with additional information, while the Loader prepares and loads the enriched data into the desired data storage or analytics platform.</p></li></ul></li><li><p><strong>BigQuery</strong>: A BigQuery setup is implemented, allowing for efficient querying and analysis of large datasets. BigQuery&#x27;s serverless and scalable nature simplifies data analytics.</p></li><li><p><strong>Service Account</strong>: A Service Account is set up, enabling secure interactions between different services and components within the GCP environment.</p></li><li><p><strong>Cloud Storage</strong>:</p></li></ol><ul><li>fabriq-dp-enricher</li><li>snowplow-events-collector-fabriq</li></ul><ol start="7"><li><strong>Pub/Sub</strong></li></ol><ul><li>snowplow-good-events-fabriq</li><li>snowplow-bad-events-fabriq</li><li>snowplow-good-events-enriched-fabriq</li><li>snowplow-bad-events-enriched-fabriq</li></ul><ol start="8"><li><strong>For bigquery</strong></li></ol><ul><li>snowplow-bad-events-bq-loader-fabriq</li><li>snowplow-types-events-bq-loader-fabriq</li><li>snowplow-failed-inserts-topic-events-bq-loader-fabriq</li></ul><h1>Steps to setup the Snowplow Streams</h1><p>GCP Snowplow Architecture</p><p><img loading="lazy" alt="Alt text" src="/assets/images/gcp_new-378e24c50a8613654a3dce0d7788518e.png" width="1688" height="721" class="img_ev3q"></p><p>This image is obtained from the following <a href="https://www.simoahava.com/analytics/install-snowplow-on-the-google-cloud-platform/" target="_blank" rel="noopener noreferrer">blog</a>.</p><p><strong>Document Links for setup Snowplow</strong></p><ul><li><a href="https://docs.snowplow.io/docs/pipeline-components-and-applications/stream-collector/setup/" target="_blank" rel="noopener noreferrer">Setup Collector</a></li><li><a href="https://docs.snowplow.io/docs/pipeline-components-and-applications/enrichment-components/enrich-pubsub/" target="_blank" rel="noopener noreferrer">Setup Enricher</a></li><li><a href="https://docs.snowplow.io/docs/pipeline-components-and-applications/stream-collector/setup/" target="_blank" rel="noopener noreferrer">Setup Loader</a></li><li><a href="https://docs.snowplow.io/docs/destinations/warehouses-and-lakes/bigquery/#streamloader" target="_blank" rel="noopener noreferrer">Setup Mutator, Repeater</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-google-cloud-project">Create a Google Cloud Project:<a href="#create-a-google-cloud-project" class="hash-link" aria-label="Direct link to Create a Google Cloud Project:" title="Direct link to Create a Google Cloud Project:">​</a></h3><ul><li>If you haven&#x27;t already, create a Google Cloud project that will be used for your Snowplow data, Postgres, and BigQuery setup.</li></ul><p><img loading="lazy" alt="Alt text" src="/assets/images/gcp_project-861670e0bfc68014c4e08ea45f5c1494.png" width="1920" height="975" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-a-service-account">Setup a Service Account<a href="#setup-a-service-account" class="hash-link" aria-label="Direct link to Setup a Service Account" title="Direct link to Setup a Service Account">​</a></h3><ul><li>Goto the console <a href="https://console.cloud.google.com/apis/credentials" target="_blank" rel="noopener noreferrer">Click here</a></li><li>To create credentials, first select the Compute Engine default service account, and then assign roles to it. Finally, create a new service account.</li></ul><p><img loading="lazy" alt="Alt text" src="/assets/images/imagecread-c74af351f79241b65d878af1e6cfe235.png" width="1766" height="746" class="img_ev3q"></p><p><img loading="lazy" alt="Alt text" src="/assets/images/image-15-b02467e0f98d291de03d59e4404c7a92.png" width="1108" height="724" class="img_ev3q"></p><p><img loading="lazy" alt="Alt text" src="/assets/images/image-16-d3633e8de224e06a2cfa8ade9f66be91.png" width="596" height="624" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-pubsub-topics-for-snowplow-collector-enricher-and-loader">Create a Pub/Sub Topics for Snowplow Collector, Enricher and Loader<a href="#create-a-pubsub-topics-for-snowplow-collector-enricher-and-loader" class="hash-link" aria-label="Direct link to Create a Pub/Sub Topics for Snowplow Collector, Enricher and Loader" title="Direct link to Create a Pub/Sub Topics for Snowplow Collector, Enricher and Loader">​</a></h2><ul><li><p>Create <code>snowplow-bad-events-fabriq</code> Pub/Sub Topic for collecting bad events from Snowplow Collector.</p></li><li><p>Create <code>snowplow-good-events-fabriq</code> Pub/Sub Topic for collecting good events from Snowplow Collector.</p></li><li><p>Goto the console <a href="https://console.cloud.google.com/cloudpubsub/topic/list" target="_blank" rel="noopener noreferrer">Click here</a></p></li><li><p>Click to Create Topic</p></li></ul><p><img loading="lazy" alt="Alt text" src="/assets/images/image-36581279ccd2de439f7a719658df6143.png" width="1920" height="914" class="img_ev3q"></p><ul><li>Enter Topic ID and create a Topic</li></ul><p><img loading="lazy" alt="Alt text" src="/assets/images/image-1-c1c9e0852a7b3d9b8b3d32095f10764f.png" width="1920" height="914" class="img_ev3q"></p><ul><li>Once the topic is created, you can obtain the subscription.</li></ul><p><img loading="lazy" alt="Alt text" src="/assets/images/image-3-0fc629bf8228a617b2c9195359e6d94f.png" width="1920" height="914" class="img_ev3q"></p><ul><li>Go to the Cloud Storage and create the necessary buckets.</li></ul><p><img loading="lazy" alt="Alt text" src="/assets/images/image-2-ecc4ac6303426f32e4af23a73b9f8550.png" width="1920" height="914" class="img_ev3q"></p><ul><li>Once the check the required Cloud Storage buckets are created.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup-snowplow-collector-instance-scala-stream-collector">Setup Snowplow Collector Instance (Scala Stream Collector)<a href="#setup-snowplow-collector-instance-scala-stream-collector" class="hash-link" aria-label="Direct link to Setup Snowplow Collector Instance (Scala Stream Collector)" title="Direct link to Setup Snowplow Collector Instance (Scala Stream Collector)">​</a></h2><p>Github URL: <a href="https://github.com/fabriq-labs/fabriq-platform/tree/master/snowplow/gcp" target="_blank" rel="noopener noreferrer">Click here</a> - fabriq-platform-snowplow-gcp.</p><p>You can find the <code>config.hocon</code> file <a href="https://github.com/fabriq-labs/fabriq-platform/blob/master/snowplow/gcp/snowplow/collector/configs/config.hocon" target="_blank" rel="noopener noreferrer">here.</a></p><p>To set up the good and bad event topics, you can use the following configuration in the <code>config.hocon</code> file:</p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">good = &quot;snowplow-good-events-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bad = &quot;snowplow-bad-events-fabriq&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additionally, you can configure the GCP credentials under the sink as follows:</p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">googleProjectId = &quot;your project id here&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After configuring the <code>config.hocon</code> file and setting up the desired topics and GCP credentials, you can proceed to build it into a Docker image and push it to the Google Container Registry (gcr).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-vm-instance-for-the-collector-loader-and-enricher">Creating a VM instance for the collector, loader, and enricher.<a href="#creating-a-vm-instance-for-the-collector-loader-and-enricher" class="hash-link" aria-label="Direct link to Creating a VM instance for the collector, loader, and enricher." title="Direct link to Creating a VM instance for the collector, loader, and enricher.">​</a></h2><ul><li>To set up the data processing pipeline, create a separate instance for the collector and another instance for the loader and enricher components.</li><li>For both the collector and loader/enricher instances, use the same configurations.</li></ul><p>To create an instance, you need to:</p><ol><li>Select a suitable boot disk.</li><li>Enter a unique instance name.</li><li>Choose the appropriate machine type for your workload.</li><li>Ensure that firewall rules allow the necessary network access for the instance.</li></ol><p><img loading="lazy" alt="Alt text" src="/assets/images/image-4-685ba7bc6f19b019309e7902204fe00a.png" width="1920" height="975" class="img_ev3q"></p><p><img loading="lazy" alt="Alt text" src="/assets/images/image-5-955e47e3529d9dfeb0024b3b12ab9df2.png" width="1920" height="975" class="img_ev3q"></p><p><img loading="lazy" alt="Alt text" src="/assets/images/image-6-adc9fe863f35939dc17c6bd779e7db5d.png" width="1920" height="2457" class="img_ev3q"></p><ul><li>Once the collector instance is created, you can allow firewall access on port 8081 specifically for that instance.</li><li>SSH into the VM instance using a secure terminal.</li><li>Install Docker and Docker Compose on your machine if you haven&#x27;t already.</li><li>To obtain the configuration files, you can clone the repository located at <a href="https://github.com/fabriq-labs/fabriq-platform/tree/master/snowplow/gcp" target="_blank" rel="noopener noreferrer">Click here</a>. This repository contains the necessary files for setting up Snowplow on GCP.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-enricher">Configuring the Enricher<a href="#configuring-the-enricher" class="hash-link" aria-label="Direct link to Configuring the Enricher" title="Direct link to Configuring the Enricher">​</a></h3><ul><li><p>Once you have cloned the repository, upload your enrichments to the <code>enrichments</code> folder inside the enricher directory.</p></li><li><p>After uploading the enrichments, you can use the following configuration in your <code>config.hocon</code> file to reference them:</p></li></ul><div class="language-{ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-{ codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;input&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;subscription&quot;: &quot;projects/your-projectid/subscriptions/snowplow-good-events-fabriq-sub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;output&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;good&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;topic&quot;: &quot;projects/your-projectid/topics/snowplow-good-events-enriched-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;bad&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;topic&quot;: &quot;projects/your-projectid/topics/snowplow-bad-events-enriched-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-loader">Configuring the Loader<a href="#configuring-the-loader" class="hash-link" aria-label="Direct link to Configuring the Loader" title="Direct link to Configuring the Loader">​</a></h3><ul><li>You can find the loader configurations under the &quot;loader&quot; folder in the repository.</li><li>To update the database details, modify the <code>config.hocon</code> file with the appropriate database settings.</li><li>Here is a sample configuration with valid Topics and database details:</li></ul><ol><li>Loader Config for Postgres</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;input&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;PubSub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;projectId&quot;: &quot;your project id&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;subscriptionId&quot;: &quot;snowplow-good-events-enriched-fabriq-sub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;output&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;good&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;Postgres&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;host&quot;: &quot;localhost&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;database&quot;: &quot;content_analytics_db&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;username&quot;: &quot;Postgres&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;password&quot;: &quot;Postgres&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;schema&quot;: &quot;atomic&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;port&quot;: 5432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>In the configuration above, make sure to provide the appropriate values for the <code>projectId</code> and <code>subscriptionId</code> to representing the Topicsand the database details such as <code>host, database, username, password, schema, and port</code> for the Postgres database. This configuration specifies that the Snowplow enriched good events will be consumed from the Kinesis stream and loaded into the specified Postgres database.</li></ul><ol start="2"><li>Loader Config for BigQuery</li></ol><ul><li>Kindly provide a unique project ID, dataset ID, and table ID for proper configuration and execution.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;projectId&quot;: &quot;your project id&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;loader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;input&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;subscription&quot;: &quot;snowplow-good-events-enriched-fabriq-sub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;output&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;good&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;datasetId&quot;: &quot;atomic&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;tableId&quot;: &quot;events&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;bad&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;topic&quot;: &quot;snowplow-bad-events-bq-loader-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;types&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;topic&quot;: &quot;snowplow-types-events-bq-loader-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;failedInserts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;topic&quot;: &quot;snowplow-failed-inserts-topic-events-bq-loader-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;mutator&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;input&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;subscription&quot;: &quot;snowplow-types-events-bq-loader-fabriq-sub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;output&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;good&quot;: ${loader.output.good} # will be automatically inferred</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;repeater&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;input&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;subscription&quot;: &quot;snowplow-failed-inserts-topic-events-bq-loader-fabriq-sub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;output&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;good&quot;: ${loader.output.good} # will be automatically inferred</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;deadLetters&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;bucket&quot;: &quot;gs://snowplow-events-collector-fabriq&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;monitoring&quot;: {} # disabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The configuration includes the following components: loader, mutator, repeater, and monitoring. The loader component processes input from a subscription, stores good events in a specified dataset and table, and sends bad events and event types to their respective topics. The mutator component takes input from a subscription and outputs good events using the loader&#x27;s output configuration. The repeater component processes failed inserts from a subscription, stores good events using the loader&#x27;s output, and stores dead letters in a designated bucket. Monitoring for the pipeline is disabled.</p><p>Here are the main components and their respective purposes in the provided configuration:</p><ol><li><p>loader:</p><ul><li>Input: Processes events from the &quot;snowplow-good-events-enriched-fabriq-sub&quot; subscription.</li><li>Output (good events): Stores them in the &quot;atomic&quot; dataset and &quot;events&quot; table.</li><li>Output (bad events): Sends them to the &quot;snowplow-bad-events-bq-loader-fabriq&quot; topic.</li><li>Output (event types): Sends them to the &quot;snowplow-types-events-bq-loader-fabriq&quot; topic.</li><li>Output (failed inserts): Sends them to the &quot;snowplow-failed-inserts-topic-events-bq-loader-fabriq&quot; topic.</li></ul></li><li><p>mutator:</p><ul><li>Input: Processes events from the &quot;snowplow-types-events-bq-loader-fabriq-sub&quot; subscription.</li><li>Output (good events): Automatically inferred from the loader&#x27;s output configuration.</li></ul></li><li><p>repeater:</p><ul><li>Input: Processes failed inserts from the &quot;snowplow-failed-inserts-topic-events-bq-loader-fabriq-sub&quot; subscription.</li><li>Output (good events): Automatically inferred from the loader&#x27;s output configuration.</li><li>Output (dead letters): Stores them in the &quot;gs://snowplow-events-collector-fabriq&quot; bucket.</li></ul></li><li><p>monitoring: Disabled, indicating that no specific monitoring configuration is provided.</p></li></ol><p>These components work together to process and distribute events based on their types, store them in designated locations, and handle any failed inserts or errors in the pipeline.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-docker-compose">Configuring the Docker Compose<a href="#configuring-the-docker-compose" class="hash-link" aria-label="Direct link to Configuring the Docker Compose" title="Direct link to Configuring the Docker Compose">​</a></h3><ul><li>To load your service account key JSON file under the snowplow repository, set the environment variable <code>GOOGLE_APPLICATION_CREDENTIALS to &quot;/snowplow/service-account-key.json&quot;</code>.</li><li>To set up Snowplow Collector using Docker Compose, create a docker-compose.yml file with the following sample code:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">version: &#x27;3&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    snowplow-collector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/scala-stream-collector-pubsub:2.9.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: [ &quot;--config&quot;, &quot;/snowplow/collector/configs/config.hocon&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow/:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;8080:8080&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>To set up Snowplow Enricher and Loader using Docker Compose, create a docker-compose.yml file with the following sample code:</li></ul><div class="language-version: codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-version: codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  snowplow-enricher:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/snowplow-enrich-pubsub:3.8.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;--config&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;/snowplow/enricher/configs/config.hocon&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;--iglu-config&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;/snowplow/enricher/configs/resolver.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;--enrichments&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;/snowplow/enricher/configs/enrichments&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  snowplow-loader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/snowplow-bigquery-streamloader:1.6.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--config=/snowplow/loader/configs/config.hocon&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--resolver=/snowplow/loader/configs/resolver.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  snowplow-loader-pg:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/snowplow-postgres-loader:0.3.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--config=/snowplow/loader-pg/configs/config.hocon&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--resolver=/snowplow/loader-pg/configs/resolver.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  snowplow-repeater:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/snowplow-bigquery-repeater:1.6.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--config=/snowplow/loader/configs/config.hocon&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--resolver=/snowplow/loader/configs/resolver.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--bufferSize=20&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--timeout=20&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--backoffPeriod=900&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  snowplow-mutator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/snowplow-bigquery-mutator:1.6.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;listen&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--config=/snowplow/loader/configs/config.hocon&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--resolver=/snowplow/loader/configs/resolver.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  snowplow-mutator-create:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: snowplow/snowplow-bigquery-mutator:1.6.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./snowplow:/snowplow/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;create&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--config=/snowplow/loader/configs/config.hocon&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--resolver=/snowplow/loader/configs/resolver.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;--partitionColumn=load_tstamp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;GOOGLE_APPLICATION_CREDENTIALS=/snowplow/service-account-key.json&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This <code>docker-compose.yml</code> file defines two services: <code>enricher</code> and <code>loader</code>. The <code>enricher</code> service uses the <code>snowplow/snowplow-enrich-kinesis:3.8.0</code> image, while the <code>loader</code> service uses the <code>snowplow/snowplow-postgres-loader:0.3.3</code> image. The services are configured with necessary command-line arguments, volumes for mounting local directories, and environment variables for GCP access credentials.</p><p>You can customize the configuration by adjusting the paths and environment variables as per your specific requirements. Once you have created the <code>docker-compose.yml</code> file, you can use it to deploy and manage the Snowplow Enricher and Loader services using Docker Compose.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-snowplow-application">Deploying the Snowplow Application<a href="#deploying-the-snowplow-application" class="hash-link" aria-label="Direct link to Deploying the Snowplow Application" title="Direct link to Deploying the Snowplow Application">​</a></h2><p>To manage your Docker Compose services, you can use the following commands:</p><ol><li>To start the services defined in your <code>docker-compose.yml</code> file and detach the terminal (run in the background), use the command: <code>docker-compose up -d</code></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>To stop and remove the running services defined in your <code>docker-compose.yml</code> file, use the command: <code>docker-compose down</code></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These commands allow you to easily manage the lifecycle of your Docker Compose services, starting them in detached mode for continuous operation or stopping and removing them when they are no longer needed.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>docker ps</code> command is used to display the currently running containers. It provides information such as the container ID, image, status, ports, and names of the running containers. By running <code>docker ps</code>, you can see a list of the active containers on your Docker host.</p><p>To view the logs of a specific container, you can use the <code>docker logs</code> command followed by the container name or ID. Here&#x27;s an example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> logs </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">container_name_or_id</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Replace <code>&lt;container_name_or_id&gt;</code> with the actual name or ID of the container whose logs you want to view.</p><p>By running this command, you can access the logs generated by the specified container, helping you troubleshoot issues or monitor the application&#x27;s output.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/snowplow/setup-snowplow-gcp.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/snowplow/setup-snowplow-aws"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Setting Up Snowplow on AWS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/toolbar"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Toolbar</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective" class="table-of-contents__link toc-highlight">Objective</a></li><li><a href="#environment-and-resources-required" class="table-of-contents__link toc-highlight">Environment and Resources Required</a><ul><li><a href="#create-a-google-cloud-project" class="table-of-contents__link toc-highlight">Create a Google Cloud Project:</a></li><li><a href="#setup-a-service-account" class="table-of-contents__link toc-highlight">Setup a Service Account</a></li></ul></li><li><a href="#create-a-pubsub-topics-for-snowplow-collector-enricher-and-loader" class="table-of-contents__link toc-highlight">Create a Pub/Sub Topics for Snowplow Collector, Enricher and Loader</a></li><li><a href="#setup-snowplow-collector-instance-scala-stream-collector" class="table-of-contents__link toc-highlight">Setup Snowplow Collector Instance (Scala Stream Collector)</a></li><li><a href="#creating-a-vm-instance-for-the-collector-loader-and-enricher" class="table-of-contents__link toc-highlight">Creating a VM instance for the collector, loader, and enricher.</a><ul><li><a href="#configuring-the-enricher" class="table-of-contents__link toc-highlight">Configuring the Enricher</a></li><li><a href="#configuring-the-loader" class="table-of-contents__link toc-highlight">Configuring the Loader</a></li><li><a href="#configuring-the-docker-compose" class="table-of-contents__link toc-highlight">Configuring the Docker Compose</a></li></ul></li><li><a href="#deploying-the-snowplow-application" class="table-of-contents__link toc-highlight">Deploying the Snowplow Application</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/fabriq-labs/fabriq-platform" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/privacy">Privacy Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 fabriq labs, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e3b0f24b.js"></script>
<script src="/assets/js/main.53e17bc8.js"></script>
</body>
</html>